import{_ as t,c as r,o as a,af as s}from"./chunks/framework.4vjtQ5Ee.js";const u=JSON.parse('{"title":"Script Automation Guardrails","description":"","frontmatter":{},"headers":[],"relativePath":"patterns/script-automation-guardrails.md","filePath":"patterns/script-automation-guardrails.md"}'),o={name:"patterns/script-automation-guardrails.md"};function i(n,e,l,c,p,d){return a(),r("div",null,[...e[0]||(e[0]=[s('<h1 id="script-automation-guardrails" tabindex="-1">Script Automation Guardrails <a class="header-anchor" href="#script-automation-guardrails" aria-label="Permalink to &quot;Script Automation Guardrails&quot;">​</a></h1><ul><li><strong>Audience:</strong> Lane C automation engineers pairing with Lane B storytellers</li><li><strong>Decision Anchor:</strong> <a href="https://github.com/louis-pvs/plaincraft/blob/main/templates/ideas/decision.md" target="_blank" rel="noreferrer">Template-first READMEs, Lane B narrative shift</a></li><li><strong>Owner:</strong> @lane.b</li><li><strong>TTL:</strong> Review by 2026-04-30</li><li><strong>Future Metric:</strong> 100% of new scripts ship with <code>--dry-run</code> + <code>--yes</code> gates and smoke tests registered in CI</li><li><strong>Recorded Media:</strong> Record later</li></ul><h2 id="why-it-matters" tabindex="-1">Why it Matters <a class="header-anchor" href="#why-it-matters" aria-label="Permalink to &quot;Why it Matters&quot;">​</a></h2><p>Repository scripts are the backbone of Plaincraft’s governance. They seed Issues, guard release notes, and keep documentation thin. When every script follows the template contract, engineers can trust dry runs, stakeholders get consistent logs, and Playbook narratives stay credible.</p><h2 id="worked-example" tabindex="-1">Worked Example <a class="header-anchor" href="#worked-example" aria-label="Permalink to &quot;Worked Example&quot;">​</a></h2><p><code>consolidate-changelog.mjs</code> showcases the play: start from the template, expose the standard flags, wire logging through <code>_lib/core.mjs</code>, and publish the narrative in Playbook so release leads know when to promote entries. The same guardrails protect <code>setup-project.mjs</code> and the idea automation scripts—any deviation is immediately obvious in CI.</p><h2 id="constraints-to-honour" tabindex="-1">Constraints to Honour <a class="header-anchor" href="#constraints-to-honour" aria-label="Permalink to &quot;Constraints to Honour&quot;">​</a></h2><ul><li>Include the template header (<code>@since</code>, <code>@version</code>, <code>Summary</code>) and exit-code semantics.</li><li>Default to preview runs; require <code>--yes</code> for writes and surface JSON/text output.</li><li>Keep scripts under 300 LOC with functions under 60 LOC. Share helpers via <code>_lib/</code>.</li><li>Register smoke, size, and policy checks so CI failures flag missing guardrails.</li><li>Run focused tests (<code>pnpm scripts:test -- --filter &lt;script&gt;</code>) for any ops script edits, and keep the worktree bootstrap suite (<code>--filter create-worktree-pr</code>) green whenever <code>pnpm gh:worktree</code> behavior changes.</li><li>Ship updates alongside a fresh <code>pnpm guardrails</code> run (or scoped variant) so regressions surface before PR.</li></ul><h2 id="links" tabindex="-1">Links <a class="header-anchor" href="#links" aria-label="Permalink to &quot;Links&quot;">​</a></h2><ul><li>Template README: <a href="https://github.com/louis-pvs/plaincraft/blob/main/templates/script/README.md" target="_blank" rel="noreferrer"><code>templates/script/README.md</code></a></li><li>Template USAGE: <a href="https://github.com/louis-pvs/plaincraft/blob/main/templates/script/USAGE.md" target="_blank" rel="noreferrer"><code>templates/script/USAGE.md</code></a></li><li>Storybook View: <a href="https://louis-pvs.github.io/plaincraft/storybook/?path=/docs/governance-script-automation--docs" target="_blank" rel="noreferrer">Governance / Script Automation</a></li><li>Guardrail Scripts: <a href="https://github.com/louis-pvs/plaincraft/blob/main/scripts/checks/policy-lint.mjs" target="_blank" rel="noreferrer"><code>scripts/checks/policy-lint.mjs</code></a>, <a href="https://github.com/louis-pvs/plaincraft/blob/main/scripts/checks/smoke.mjs" target="_blank" rel="noreferrer"><code>scripts/checks/smoke.mjs</code></a>, <a href="https://github.com/louis-pvs/plaincraft/blob/main/scripts/checks/size-check.mjs" target="_blank" rel="noreferrer"><code>scripts/checks/size-check.mjs</code></a></li><li>Ops Examples: <a href="https://github.com/louis-pvs/plaincraft/blob/main/scripts/ops/consolidate-changelog.mjs" target="_blank" rel="noreferrer"><code>scripts/ops/consolidate-changelog.mjs</code></a>, <a href="https://github.com/louis-pvs/plaincraft/blob/main/scripts/ops/setup-project.mjs" target="_blank" rel="noreferrer"><code>scripts/ops/setup-project.mjs</code></a></li></ul>',10)])])}const m=t(o,[["render",i]]);export{u as __pageData,m as default};
