import { Meta } from "@storybook/blocks";

<Meta title="Governance/Script Automation" />

# Script Automation (view)

Scripts orchestrate Plaincraft’s guardrails. Every new helper must ship with the standard CLI contract so teams trust dry-runs and CI outputs.

## Signals to Watch

- Missing `--dry-run` defaults or `--yes` gates point to unsafe execution.
- Scripts over 300 LOC tend to hide untested branches—schedule a refactor.
- Lack of smoke-test coverage means ops commands drift without alerting CI.

## Worked Example

`consolidate-changelog.mjs` pairs the script template with Playbook storytelling. The CLI defaults to preview mode, exposes JSON/text output, and records run IDs for incident reviews. When Lane D ships release notes, the dry-run output is shared before toggling `--yes`.

## Hand-off Links

- Template README → `/templates/script/README.md`
- Template USAGE → `/templates/script/USAGE.md`
- Guardrail suite → `scripts/checks/policy-lint.mjs`, `scripts/checks/smoke.mjs`, `scripts/checks/size-check.mjs`

## Constraints

- Include the template header (`@since`, `@version`, `Summary`) and exit-code semantics.
- Keep all writes behind `--yes`. Dry-runs must log intended mutations.
- Prefer `_lib/` helpers for shared logic to keep ops scripts composable.
