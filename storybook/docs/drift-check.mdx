import { Meta } from "storybook/blocks";

<Meta title="Governance/Drift Check" />

# Drift Check (view)

Lifecycle drift happens when idea metadata (lane, status) stops matching the GitHub Project record. The drift checker gives every lane a quick sanity scan so we can fix the narrative before pushing.

## Command Contract

```bash
# Scan all ideas (dry-run only)
pnpm drift:check --output json

# Focus on the idea you just edited
pnpm drift:check -- --paths ideas/ARCH-scripts-first-automation-suite.md --output json
```

- Always run drift before sending a PR review or project status update.
- CI runs the same command inside `pnpm guardrails`; local noise must be cleared before merge.
- Output is JSON friendly so you can drop it in a PR comment or status note when calling out clean-up work.

## Typical Fixes

- **Missing `Status:` section** — add a status log near the bottom of the idea (`- 2025-11-03 – Updated to \`Branched\``).
- **Unknown status** — align with the canonical list from `scripts/config/lifecycle.json` (`Draft, Ticketed, Branched, PR Open, In Review, Merged, Archived`).
- **Lane mismatch** — ensure the idea header still begins with `Lane: <letter>` so automation can map the card back to the right backlog owner.

## Links

- Lifecycle Config (`scripts/config/lifecycle.json`)
- Guardrail Suite (`pnpm guardrails`)
- Playbook: [Scripts-First Lifecycle Overview](https://louis-pvs.github.io/plaincraft/playbook/patterns/scripts-first-lifecycle-overview.html)
